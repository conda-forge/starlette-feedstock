schema_version: 1

context:
  version: 0.46.2
  PYTHON: "\"PYTHON | default(\"$PYTHON\")\""

recipe:
  name: starlette
  version: ${{ version }}

source:
  url: https://pypi.org/packages/source/s/starlette/starlette-${{ version }}.tar.gz
  sha256: 7f7361f34eed179294600af672f565727419830b54b7b084efe44bb82d2fccd5

build:
  number: 0
  noarch: python
  script: python -m pip install . --no-deps --no-build-isolation -vv --disable-pip-version-check

outputs:
  - package:
      name: starlette
    requirements:
      build:
        - if: build_platform != target_platform
          then: python
        - if: build_platform != target_platform
          then: cross-python_${{ target_platform }}
      host:
        - hatchling
        - pip
        - python ${{ python_min }}.*
      run:
        - anyio >=3.6.2,<5
        - python >=${{ python_min }}
        - typing_extensions >=3.10.0

    tests:
      - python:
          imports:
            - starlette
          pip_check: true
          python_version: ${{ python_min }}.*

  - package:
      name: starlette-full
    build:
      noarch: generic
    requirements:
      run:
        - ${{ pin_subpackage('starlette', exact=True) }}
        - httpx >=0.27.0,<0.29.0
        - itsdangerous
        - jinja2
        - python-multipart >=0.0.18
        - pyyaml
    tests:
      - python:
          imports:
            - starlette
          pip_check: true
          python_version: ${{ python_min }}.*

about:
  license: BSD-3-Clause
  license_file: LICENSE.md
  summary: The little ASGI framework that shines.
  description: |
    Starlette is a lightweight [ASGI](https://asgi.readthedocs.io/en/latest/)
    framework/toolkit.

    It is ideal for building high performance asyncio services, and supports
    both HTTP and WebSockets.
  homepage: https://www.starlette.io/
  repository: https://github.com/encode/starlette/
  documentation: https://www.starlette.io/

extra:
  feedstock-name: starlette
  recipe-maintainers:
    - carlodri
    - dgasmith
    - thewchan
